/*!
 * @author   yongbingzhang@Ctrip
 * boxDialog 通用弹窗组件
*/
!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i;!function(o,r){i=function(){return r(o)}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}("undefined"!=typeof window?window:void 0,function(e){function t(e){return arguments.length?void(e&&g(e)&&v(e)):void v(d)}function i(){v(d,!0)}function o(e,t,n,i){switch(i=g(i)?i:2,e=f(e)?e:x.title,t=f(t)?t:x.content,n){case"success":n="success";break;case"failure":n="failure";break;case"warning":n="warning";break;case"question":n="question";break;default:n=null}s({title:e,content:t,icon:n,time:i,button:!1})}function r(e,t,n){n=n?n:"198px",e=f(e)?e:x.content,t=h(t)?t:null,s({content:e,okCallback:t,size:[n],button:{ok:{callback:t},cancel:!1}})}function s(e){var t=new p(e,d);return t}var a="2.0",c=c||{},d=d||[],l=n(1),u=n(2),p=n(3),v=n(12),f=u.isType("String"),g=u.isType("Number"),h=u.isType("Function"),x=l.config;l.DOM;return c={version:a,open:s,close:t,closeAll:i,msg:o,alert:r,list:d},e.$&&($.boxDialog=function(e){s(e)},$.fn&&($.fn.boxDialog=$.boxDialog)),e.boxDialog=c,c})},function(e,t){"use strict";var n={type:"dialog",title:"消息",content:"欢迎使用boxDialog弹窗组件！",size:["20px","10px"],showClose:!0,className:null,padding:"20px",icon:null,time:null,fixed:!0,zIndex:20150326,drag:!1,resize:!0,position:null,shade:{background:"#000",opacity:.8},button:{ok:{text:"确定",className:"active",callback:null},cancel:{text:"取消",className:null,callback:null}},init:null,close:null},i={wrap:"box-dialog",title:"boxdialog-title",content:"boxdialog-content",close:"boxdialog-close",btns:"boxdialog-btns",button:"boxdialog-btn",buttonActive:"active",shade:"box-dialog-shade",icon:"boxdialog-icon",topActive:"box-dialog-active",iframe:"boxdialog-iframe"};e.exports={config:n,DOM:i}},function(e,t){"use strict";var n={};n={isType:function(e){return function(t){return{}.toString.call(t)==="[object "+e+"]"}},extend:function(){function e(t,n){for(var i in t)n.hasOwnProperty(i)||(n[i]=t[i]),o(r)&&r&&a(t[i])&&e(t[i],n[i])}var t=[].slice.call(arguments),i=t.length,o=n.isType("Boolean"),r=t[0];if(!i)return{};for(var s={},a=n.isType("Object"),c=o(r)?1:0,d=i-1;d>=c;d--)a(t[d])&&e(t[d],s);return s},convert:function(e,t){var i=/^\d+%$/,o=n.isType("Number");return e?(o(t)&&i.test(e)&&(e=t*e.split("%")[0]/100),e=parseInt(e,10)):void 0},getWindowSize:function(){var e=void 0,t=void 0;return e=window.innerWidth?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth,t=window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight,[e,t]},addEvent:function(e,t,n){var i=null;i=e.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:e.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n},i(e,t,n),this.addEvent=i},removeEvent:function(e,t,n){var i=null;i=e.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:e.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=null},i(e,t,n),this.removeEvent=i},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,e},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e}},e.exports=n},function(e,t,n){"use strict";function i(e,t){(u(e)||1===e.nodeType)&&(e={content:e}),this.optsOrigin=r.extend(!0,o.config,e),this.opts=r.extend(this.optsOrigin),this.opts.index=++l,this.opts.DOM=o.DOM,this.opts.wrap=o.DOM.wrap+this.opts.index,this.opts.shadeWrap=o.DOM.shade+this.opts.index,this.opts.doc=document,this.opts.zIndex+=this.opts.index,this.opts.list=t,this.init()}var o=n(1),r=n(2),s=n(4),a=n(7),c=n(8),d=n(9),l=0,u=r.isType("String"),p=(r.isType("Object"),r.isType("Number"));i.prototype.init=function(){var e=this,t=e.opts;e.render(),e.setPosition(),e.addEvent(),e.opts.list.push(e.opts.index);var n=t.time;n&&p(n)&&e.autoClose(n)},i.prototype.render=function(){var e=this.opts;return s(e),this},i.prototype.setPosition=function(){return a(this.opts),this},i.prototype.addEvent=function(){return c.addListeners.call(this,this.opts),this},i.prototype.close=function(){return d(this.opts),this},i.prototype.autoClose=function(e){var t=this;return setTimeout(function(){t.close()},1e3*e),t},e.exports=i},function(e,t,n){"use strict";function i(e){var t=e.title,n=e.DOM,i=e.doc,c=a(e.type)?e.type:"",d=e.content,l=a(d)?d:"",u=!1,p=void 0,v=void 0,f=void 0,g="";if(t&&a(t)&&(p=function(){var i="";return i='<div class="'+n.title+'"'+(e.drag?'style="cursor:move"':"")+">"+t+"</div>",e.showClose?i+='<div class="boxdialog-close-box"><a href="javascript:;" class="'+n.close+'">×</a></div>':i}()),!l&&d&&1===d.nodeType){var h=d.style.display,x=d.previousSibling,m=d.nextSibling,b=d.parentNode;e.eleBack=function(){x&&x.parentNode?x.parentNode.insertBefore(d,x.nextSibling):m&&m.parentNode?m.parentNode.insertBefore(d,m):b&&b.appendChild(d),d.style.display=h},u=!0,e.isContentObj=u}f=i.createElement("div"),f.id=n.wrap+e.index,f.style.zIndex=e.zIndex-1,f.setAttribute("data-index",e.index);var y=r.renderDOM(e)||"";v=a(e.icon)&&function(){return'<em class="'+n.icon+" "+e.icon+'"></em>'}();var w=e.padding?o.convert(e.padding):"";switch(w=w?'style="padding:'+w+'px;"':"",c){case"loading":loadingImg='<img src="skins/icons/loading.gif">',g+='<div class="'+n.wrap+" "+n.wrap+'-loading">'+p+'\n                <div class="'+n.content+'">'+loadingImg+"</div>\n             </div>";break;default:g+='<div class="'+n.wrap+(e.className?" "+e.className:"")+'" style="z-index:'+e.zIndex+';">\n              '+p+'\n              <div class="'+n.content+(a(e.icon)?" "+n.icon+"-true":"")+'"'+w+">"+(v?v:"")+l+"</div>\n              "+y+"\n            </div>"}g+=s(e),f.innerHTML=g,i.body.appendChild(f),u&&(f.querySelector("."+n.content).appendChild(d),d.style.display="block")}var o=n(2),r=n(5),s=n(6),a=o.isType("String");e.exports=i},function(e,t,n){"use strict";var i=n(2),o=(i.isType("Array"),i.isType("Object")),r={},s={},a=function(e){var t=e.button&&o(e.button)?e.button:null,n=(document,e.DOM);if(t){var i="";for(var s in t){if(!o(t[s]))return;var a=n.button,c=t[s],d=c.text;if(!d)return;var l='<button class="'+a+(c.className?" "+c.className:"")+'" data-title="'+(d+"_"+s)+'" '+(c.disabled?disabled="disabled":"")+">"+d+"</button>";r[d+"_"+s]=c.callback,i+=l}return'<div class="'+n.btns+'">'+i+"</div>"}};s.listeners=r,s.renderDOM=a,e.exports=s},function(e,t){"use strict";function n(e){var t=(e.doc,e.DOM),n="",i="";return e.shade?(i="opacity:"+e.shade.opacity+";z-index:"+(e.zIndex-1)+";background-color:"+e.shade.background+";",n='<div id="'+(t.shade+e.index)+'" class="'+t.shade+'" style="'+i+'"></div>'):void 0}e.exports=n},function(e,t,n){"use strict";function i(e){var t=null,n=void 0,i=void 0,r=void 0,s=void 0,a=void 0,c=void 0,d=e.doc,l=e.wrap,u=(e.DOM,d.getElementById(l)),p=u.style,v=p.cssText,f=e.position;n=e.fixed?"fixed":"absolute",i=e.zIndex,f&&isObject(f)&&(r=f.left?f.left:"",s=f.top?f.top:"",a=f.right?f.right:"",c=f.bottom?f.bottom:"");var g=o.convert,h=o.getWindowSize(),x=e.size,m="",b="",y="",w="",E="";r&&!a?(r=g(r),m+="left:"+r+"px;"):a&&!r?(a=g(a),m+="right:"+a+"px;"):(y=g(x[0]),r=parseInt((h[0]-y)/2,10),m+="left:"+r+"px;"),E+="width:"+y+"px;",s&&!c?(s=g(s),b+="top:"+s+"px;"):c&&!s?(c=g(c),b+="bottom:"+c+"px;"):(w=x[1]?g(x[1]):u.offsetHeight,s=parseInt((h[1]-w)/2,10),b+="top:"+s+"px;"),E=x[1]?E+(";height:"+w+"px;"):E,t=E+"position:"+n+";"+m+";"+b+";",v?(v+=";"+t,p.cssText=v):p.cssText=t}var o=n(2);e.exports=i},function(e,t,n){"use strict";function i(e){var t=e.wrap,n=e.doc,i=n.getElementById(t),u=e.DOM,p=e.index,v=this,f=function(t){var n=o.getTarget(t),i=n.nodeName.toLowerCase(),a=n.getAttribute("data-title");if(e.showClose&&"a"==i&&n.className==u.close&&s.call(v,e),a&&"button"==i){var c=r.listeners[a];c&&d(c)&&c.call(v,p)===!1?v:s.call(v,e)}};if(o.addEvent(i,"click",f),d(e.init)&&e.init.call(v,p),e.drag&&a(e),e.resize){var g=i.offsetLeft,h=i.offsetTop;e.oldOffset=[g,h],e.oldWindowSize=o.getWindowSize()||[],l=function(){c(e)},o.addEvent(window,"resize",l)}}var o=n(2),r=n(5),s=n(9),a=n(10),c=n(11),d=o.isType("Function"),l=(o.isType("Array"),null),u={};u={addListeners:i,handlerResize:l},e.exports=u},function(e,t,n){"use strict";function i(e){var t=e.index,n=e.wrap,i=e.doc,a=e.list,c=o.isType("Array"),d=i.getElementById(n);if(d){var l=null;if(l=d.parentNode?d.parentNode:i.body,l.removeChild(d),e.close&&s(e.close)&&e.close.call(this,t),a&&c(a))for(var u=a.length-1;u>=0;u--)if(a[u]==t){a.splice(u,1);break}e.isContentObj&&e.eleBack&&e.eleBack(),e=null,r.handlerResize&&o.removeEvent(window,"resize",r.handlerResize)}}var o=(n(1),n(2)),r=n(8),s=o.isType("Function");e.exports=i},function(e,t,n){"use strict";function i(e){var t=(e.index,e.DOM),n=e.doc,i=e.wrap,r=n.getElementById(i);if(r){var s=r.querySelector("."+t.title),a=r.style,c=o.getWindowSize(),d=void 0,l=void 0,u=void 0,p=void 0;d=r.offsetWidth,l=r.offsetHeight,u=c[0]-d,p=c[1]-l,s.onmousedown=function(e){e=o.getEvent(e),o.preventDefault(e);var t=0,i=0;t=e.clientX-r.offsetLeft,i=e.clientY-r.offsetTop,n.onmousemove=function(e){e=o.getEvent(e),o.preventDefault(e);var n=void 0,r=void 0;n=e.clientX-t,r=e.clientY-i,n=n>0?n:0,n=n>u?u:n,r=r>0?r:0,r=r>p?p:r,a.left=n+"px",a.top=r+"px"},n.onmouseup=function(){o.preventDefault(e),n.onmousemove=null,n.onmouseup=null}}}}var o=n(2);e.exports=i},function(e,t,n){"use strict";function i(e){var t=(e.index,e.doc),n=e.wrap,i=t.getElementById(n),r=i&&i.style,s=e.oldWindowSize,a=e.oldOffset,c=o.getWindowSize(),d=void 0,l=void 0;i&&r&&(l&&clearTimeout(l),l=setTimeout(function(){d()},100),d=function(){var t=void 0,n=void 0,o=void 0,d=void 0;t=parseInt((s[0]-c[0])/2,10),n=parseInt((s[1]-c[1])/2,10),t&&(o=0>t?Math.abs(t)+a[0]:i.offsetWidth>c[0]?0:a[0]-t,r.left=o+"px"),n&&(d=0>n?Math.abs(n)+a[1]:i.offsetHeight>c[1]?0:a[1]-n,r.top=d+"px"),e.oldWindowSize=c,e.oldOffset=[o,d]})}var o=n(2);e.exports=i},function(e,t,n){"use strict";function i(e,t){var n=o.DOM,i=n.wrap,r=n.close;if(t&&a(t)){if(e&&s(e)){for(var d=0,l=e.length;l>d;d++){var u=document.getElementById(i+d);if(u){var p=u.querySelector("."+r);if(p)p.click();else{var v=u.parentNode?u.parentNode:document.body;v.removeChild(u)}}}e.length=0}}else{var f=null;if(s(e)&&e.pop())f=document.getElementById(i+pop);else{if(!e||!c(e))return;f=document.getElementById(i+e)}if(!f)return;var g=f.querySelector("."+r);if(g)g.click();else{var h=f.parentNode?f.parentNode:document.body;h.removeChild(f)}}return e}var o=n(1),r=n(2),s=r.isType("Array"),a=r.isType("Boolean"),c=r.isType("Number");e.exports=i}]);